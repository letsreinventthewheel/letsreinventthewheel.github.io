<!DOCTYPE html><html lang="en"><head><title>0n0FF: Teaching a Puzzle to Solve Itself</title><meta charset="utf-8"><meta name="title" content="0n0FF: Teaching a Puzzle to Solve Itself"><meta name="description" content="&lt;p&gt;We extend 0n0FF with a real time solver powered by Breadth First Search (BFS) and
bit manipulation. Learn how to compute perfect puzzle solutions and guide players
with subtle visual hints - all in &lt;code&gt;React&lt;/code&gt; and &lt;code&gt;TypeScript&lt;/code&gt;.&lt;/p&gt;
"><meta name="author" content="Konstantin Saveljev (Let's Reinvent the Wheel [YouTube])"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="google-site-verification" content="vxirvCL76iTa-DRcURspQpGm0NvyxSQDBwncMnb8YE4"><meta name="msvalidate.01" content="06DC990D9D0525AF53BD9C295CEB171B"><link rel="sitemap" href="/sitemap.xml"><link rel="alternate" type="application/rss+xml" title="Let’s Reinvent the Wheel :: Blog" href="/blog/feed.xml"><link rel="stylesheet" href="/main.css?hash=22a6509cab06d665"></head><body><header><button class="menu-toggle"><span></span><span></span><span></span></button><nav class="nav"><a class="github" href="https://github.com/letsreinventthewheel" target="_blank"></a><a class="" href="/">Home</a><a class="active" href="/blog">Blog</a></nav><h1>0n0FF: Teaching a Puzzle to Solve Itself</h1><p>Published on <time class="dt-published" datetime="2025-06-27">June 27<sup>th</sup>, 2025</time></p></header><main id="main"><section class="video_container"><iframe src="https://www.youtube.com/embed/w7-x7hvT3Uo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></section><p>In <a href="https://letsreinventthewheel.github.io/blog/onoff/">previous</a> episode we built <strong>0n0FF</strong>, a minimalist tile flipping puzzle game in <code>React</code> and <code>TypeScript</code>. This time we’re giving our game a brain.</p>
<p>We are adding a <strong>solver</strong> that can compute the optimal solution to any board state and then <strong>show the next best move</strong> directly to the player using a subtle, gray toned guide beneath the main board.</p>
<h2><a href="#what-youll-learn" aria-hidden="true" class="anchor" id="what-youll-learn"></a>What You’ll Learn</h2>
<ul>
<li>How to <strong>solve a logic puzzle with breadth first search (BFS)</strong></li>
<li>How to <strong>represent board states as bitmasks</strong> for performance</li>
<li>How to <strong>integrate a solver into an interactive React UI</strong></li>
<li>How to <strong>visualize solver hints</strong> without distracting from gameplay</li>
<li>Why immutability and clean state separation matter</li>
</ul>
<h2><a href="#project-code" aria-hidden="true" class="anchor" id="project-code"></a>Project Code</h2>
<p>You’ll find the complete source code here: <a href="https://github.com/letsreinventthewheel/0n0ff-puzzle">0n0ff-puzzle</a></p>
<h3><a href="#how-it-works" aria-hidden="true" class="anchor" id="how-it-works"></a>How It Works</h3>
<p>The core idea is simple: treat each board state as a node in a graph. A move transforms one state into another and we search for the <strong>shortest path</strong> to the win condition (all green tiles).</p>
<p>To avoid visiting the same state twice we encode the board as a single integer (a <strong>bitmask</strong> of 16 bits for a 4x4 grid). This turns a potentially slow puzzle solver into a <strong>blazing fast</strong> pathfinder.</p>
<pre class="language-ts"><span class="source ts"><span class="meta var expr ts"><span class="storage type ts">const</span> <span class="meta var-single-variable expr ts"><span class="meta definition variable ts"><span class="variable other constant ts"><span class="entity name function ts">hash</span></span></span> </span><span class="keyword operator assignment ts">=</span><span class="meta arrow ts"> <span class="meta parameters ts"><span class="punctuation definition parameters begin ts">(</span><span class="variable parameter ts">grid</span><span class="meta type annotation ts"><span class="keyword operator type annotation ts">:</span> <span class="entity name type ts">Grid</span></span><span class="punctuation definition parameters end ts">)</span></span><span class="meta return type arrow ts"><span class="keyword operator type annotation ts">:</span> <span class="support type primitive ts">number</span> </span></span><span class="meta arrow ts"><span class="storage type function arrow ts">=&gt;</span> <span class="meta block ts"><span class="punctuation definition block ts">{</span>
  <span class="meta var expr ts"><span class="storage type ts">let</span> <span class="meta var-single-variable expr ts"><span class="meta definition variable ts"><span class="variable other readwrite ts">result</span></span> </span><span class="keyword operator assignment ts">=</span> <span class="constant numeric decimal ts">0</span></span><span class="punctuation terminator statement ts">;</span>
  <span class="keyword control loop ts">for</span> <span class="meta brace round ts">(</span><span class="meta var expr ts"><span class="storage type ts">let</span> <span class="meta var-single-variable expr ts"><span class="meta definition variable ts"><span class="variable other readwrite ts">r</span></span> </span><span class="keyword operator assignment ts">=</span> <span class="constant numeric decimal ts">0</span></span><span class="punctuation terminator statement ts">;</span> <span class="variable other readwrite ts">r</span> <span class="keyword operator relational ts">&lt;</span> <span class="variable other constant ts">GRID_SIZE</span><span class="punctuation terminator statement ts">;</span> <span class="variable other readwrite ts">r</span><span class="keyword operator increment ts">++</span><span class="meta brace round ts">)</span> <span class="meta block ts"><span class="punctuation definition block ts">{</span>
    <span class="keyword control loop ts">for</span> <span class="meta brace round ts">(</span><span class="meta var expr ts"><span class="storage type ts">let</span> <span class="meta var-single-variable expr ts"><span class="meta definition variable ts"><span class="variable other readwrite ts">c</span></span> </span><span class="keyword operator assignment ts">=</span> <span class="constant numeric decimal ts">0</span></span><span class="punctuation terminator statement ts">;</span> <span class="variable other readwrite ts">c</span> <span class="keyword operator relational ts">&lt;</span> <span class="variable other constant ts">GRID_SIZE</span><span class="punctuation terminator statement ts">;</span> <span class="variable other readwrite ts">c</span><span class="keyword operator increment ts">++</span><span class="meta brace round ts">)</span> <span class="meta block ts"><span class="punctuation definition block ts">{</span>
      <span class="keyword control conditional ts">if</span> <span class="meta brace round ts">(</span><span class="variable other readwrite ts">grid</span><span class="meta array literal ts"><span class="meta brace square ts">[</span><span class="variable other readwrite ts">r</span><span class="meta brace square ts">]</span></span><span class="meta array literal ts"><span class="meta brace square ts">[</span><span class="variable other readwrite ts">c</span><span class="meta brace square ts">]</span></span><span class="meta brace round ts">)</span> <span class="meta block ts"><span class="punctuation definition block ts">{</span>
        <span class="variable other readwrite ts">result</span> <span class="keyword operator assignment compound bitwise ts">|=</span> <span class="constant numeric decimal ts">1</span> <span class="keyword operator bitwise shift ts">&lt;&lt;</span> <span class="meta brace round ts">(</span><span class="variable other readwrite ts">r</span> <span class="keyword operator arithmetic ts">*</span> <span class="variable other constant ts">GRID_SIZE</span> <span class="keyword operator arithmetic ts">+</span> <span class="variable other readwrite ts">c</span><span class="meta brace round ts">)</span><span class="punctuation terminator statement ts">;</span>
      <span class="punctuation definition block ts">}</span></span>
    <span class="punctuation definition block ts">}</span></span>
  <span class="punctuation definition block ts">}</span></span>
  <span class="keyword control flow ts">return</span> <span class="variable other readwrite ts">result</span><span class="punctuation terminator statement ts">;</span>
<span class="punctuation definition block ts">}</span></span></span></span><span class="punctuation terminator statement ts">;</span>
</span></code></pre>
<hr />
<h4><a href="#breadth-first-search-bfs" aria-hidden="true" class="anchor" id="breadth-first-search-bfs"></a>Breadth First Search (BFS)</h4>
<p>Using a BFS loop we explore all possible move sequences from the current board state, stopping the moment we find a winning path.</p>
<pre class="language-ts"><span class="source ts"><span class="keyword control loop ts">while</span> <span class="meta brace round ts">(</span><span class="variable other object ts">queue</span><span class="punctuation accessor ts">.</span><span class="support variable property ts">length</span><span class="meta brace round ts">)</span> <span class="meta block ts"><span class="punctuation definition block ts">{</span>
  <span class="meta var expr ts"><span class="storage type ts">const</span> <span class="meta object-binding-pattern-variable ts"><span class="punctuation definition binding-pattern object ts">{</span> <span class="meta definition variable ts"><span class="variable other constant ts">grid</span></span><span class="punctuation separator comma ts">,</span> <span class="meta definition variable ts"><span class="variable other constant ts">moves</span></span> <span class="punctuation definition binding-pattern object ts">}</span> </span><span class="keyword operator assignment ts">=</span> <span class="meta function-call ts"><span class="variable other object ts">queue</span><span class="punctuation accessor ts">.</span><span class="support function ts">shift</span></span><span class="meta brace round ts">(</span><span class="meta brace round ts">)</span></span><span class="punctuation terminator statement ts">;</span>
  <span class="keyword control conditional ts">if</span> <span class="meta brace round ts">(</span><span class="meta function-call ts"><span class="entity name function ts">isWon</span></span><span class="meta brace round ts">(</span><span class="variable other readwrite ts">grid</span><span class="meta brace round ts">)</span><span class="meta brace round ts">)</span> <span class="keyword control flow ts">return</span> <span class="variable other readwrite ts">moves</span><span class="punctuation terminator statement ts">;</span>
<span class="punctuation whitespace comment leading ts">  </span><span class="comment line double-slash ts"><span class="punctuation definition comment ts">//</span></span><span class="comment line double-slash ts"> Try all 16 next moves</span>
<span class="punctuation definition block ts">}</span></span>
</span></code></pre>
<p>Each move toggles an entire row and column which we simulate using XOR on the bitmask.</p>
<h4><a href="#solver-integration" aria-hidden="true" class="anchor" id="solver-integration"></a>Solver Integration</h4>
<p>Once the solver is in place, we run it:</p>
<ul>
<li>At the <strong>start of each new game</strong></li>
<li>After <strong>every player move</strong></li>
</ul>
<p>This allows us to continuously maintain an <strong>up to date optimal path</strong> to the win state. The next move is then shown to the player (but only subtly).</p>
<h4><a href="#visualizing-the-hint" aria-hidden="true" class="anchor" id="visualizing-the-hint"></a>Visualizing the Hint</h4>
<p>Beneath the main board we render a <strong>semi transparent, grayscale copy</strong> of the grid with a <strong>darker highlight</strong> on the next suggested move:</p>
<pre class="language-tsx"><span class="source tsx"><span class="meta tag tsx"><span class="punctuation definition tag begin tsx">&lt;</span><span class="entity name tag tsx">div</span><span class="meta tag attributes tsx">
  <span class="entity other attribute-name tsx">className</span><span class="keyword operator assignment tsx">=</span><span class="punctuation section embedded begin tsx">{</span><span class="meta embedded expression tsx"><span class="string template tsx"><span class="punctuation definition string template begin tsx">`</span>solution-cell <span class="meta template expression tsx"><span class="punctuation definition template-expression begin tsx">${</span></span><span class="meta template expression tsx"><span class="meta embedded line tsx">
    <span class="variable other object tsx">nextMove</span><span class="punctuation accessor tsx">.</span><span class="variable other property tsx">row</span> <span class="keyword operator comparison tsx">===</span> <span class="variable other readwrite tsx">rowIdx</span> <span class="keyword operator logical tsx">&amp;&amp;</span> <span class="variable other object tsx">nextMove</span><span class="punctuation accessor tsx">.</span><span class="variable other property tsx">column</span> <span class="keyword operator comparison tsx">===</span> <span class="variable other readwrite tsx">cellIdx</span> <span class="keyword operator ternary tsx">?</span> <span class="string quoted double tsx"><span class="punctuation definition string begin tsx">&quot;</span>next-move<span class="punctuation definition string end tsx">&quot;</span></span> <span class="keyword operator ternary tsx">:</span> <span class="string quoted double tsx"><span class="punctuation definition string begin tsx">&quot;</span><span class="punctuation definition string end tsx">&quot;</span></span>
  </span><span class="punctuation definition template-expression end tsx">}</span></span><span class="punctuation definition string template end tsx">`</span></span></span><span class="punctuation section embedded end tsx">}</span>
</span><span class="punctuation definition tag end tsx">/&gt;</span></span>
</span></code></pre>
<p>And in CSS:</p>
<pre class="language-css"><span class="source css"><span class="meta selector css"><span class="entity other attribute-name class css"><span class="punctuation definition entity css">.</span>solution-cell</span><span class="entity other attribute-name class css"><span class="punctuation definition entity css">.</span>next-move</span> </span><span class="meta property-list css"><span class="punctuation section property-list css">{</span>
  <span class="meta property-name css"><span class="support type property-name css">background</span></span><span class="punctuation separator key-value css">:</span><span class="meta property-value css"> </span><span class="meta property-value css"><span class="meta function-call css"><span class="support function color css">rgba</span><span class="meta group css"><span class="punctuation definition group begin css">(</span><span class="constant numeric integer decimal css">20</span><span class="punctuation separator sequence css">,</span> <span class="constant numeric integer decimal css">20</span><span class="punctuation separator sequence css">,</span> <span class="constant numeric integer decimal css">20</span><span class="punctuation separator sequence css">,</span> <span class="constant numeric float decimal css">0<span class="punctuation separator decimal css">.</span>6</span></span><span class="meta group css"><span class="punctuation definition group end css">)</span></span></span></span><span class="punctuation terminator rule css">;</span>
  <span class="meta property-name css"><span class="support type property-name css">border</span></span><span class="punctuation separator key-value css">:</span><span class="meta property-value css"> </span><span class="meta property-value css"><span class="constant numeric integer decimal css">1<span class="keyword other unit css">px</span></span> <span class="support constant property-value css">solid</span> <span class="meta function-call css"><span class="support function color css">rgba</span><span class="meta group css"><span class="punctuation definition group begin css">(</span><span class="constant numeric integer decimal css">30</span><span class="punctuation separator sequence css">,</span> <span class="constant numeric integer decimal css">30</span><span class="punctuation separator sequence css">,</span> <span class="constant numeric integer decimal css">30</span><span class="punctuation separator sequence css">,</span> <span class="constant numeric float decimal css">0<span class="punctuation separator decimal css">.</span>8</span></span><span class="meta group css"><span class="punctuation definition group end css">)</span></span></span></span><span class="punctuation terminator rule css">;</span>
  <span class="meta property-name css"><span class="support type property-name css">box-shadow</span></span><span class="punctuation separator key-value css">:</span><span class="meta property-value css"> </span><span class="meta property-value css"><span class="constant numeric integer decimal css">0</span> <span class="constant numeric integer decimal css">0</span> <span class="constant numeric integer decimal css">4<span class="keyword other unit css">px</span></span> <span class="meta function-call css"><span class="support function color css">rgba</span><span class="meta group css"><span class="punctuation definition group begin css">(</span><span class="constant numeric integer decimal css">100</span><span class="punctuation separator sequence css">,</span> <span class="constant numeric integer decimal css">100</span><span class="punctuation separator sequence css">,</span> <span class="constant numeric integer decimal css">100</span><span class="punctuation separator sequence css">,</span> <span class="constant numeric float decimal css">0<span class="punctuation separator decimal css">.</span>8</span></span><span class="meta group css"><span class="punctuation definition group end css">)</span></span></span></span><span class="punctuation terminator rule css">;</span>
  <span class="meta property-name css"><span class="support type property-name css">filter</span></span><span class="punctuation separator key-value css">:</span><span class="meta property-value css"> </span><span class="meta property-value css"><span class="meta function-call css"><span class="support function filter css">blur</span><span class="meta group css"><span class="punctuation definition group begin css">(</span><span class="constant numeric float decimal css">0<span class="punctuation separator decimal css">.</span>8<span class="keyword other unit css">px</span></span></span><span class="meta group css"><span class="punctuation definition group end css">)</span></span></span></span><span class="punctuation terminator rule css">;</span>
</span><span class="punctuation section property-list css">}</span>
</span></code></pre>
<hr />
<h4><a href="#pure-state-clean-react" aria-hidden="true" class="anchor" id="pure-state-clean-react"></a>Pure State, Clean React</h4>
<p>To keep things clean and reactive:</p>
<ul>
<li>We <strong>track both the initial and current board state</strong></li>
<li>The solver output is stored in <code>state.solver</code></li>
<li>We added a <strong>“Reset Game”</strong> button to return to the initial configuration</li>
</ul>
<p>This ensures the solver always computes from the true current board and allows for easy restarts or comparisons.</p>
<h4><a href="#performance" aria-hidden="true" class="anchor" id="performance"></a>Performance</h4>
<p>Thanks to bit manipulation and BFS:</p>
<ul>
<li>Solving from any state is <strong>instant</strong></li>
<li>We support <strong>perfect solutions</strong> on every move</li>
<li>No async, no lag, no external dependencies</li>
</ul>
<h4><a href="#final-touches" aria-hidden="true" class="anchor" id="final-touches"></a>Final Touches</h4>
<p>We updated the <strong>header</strong> to show:</p>
<ul>
<li>The number of remaining moves in the current optimal path</li>
<li>The original minimum solution length (for comparison)</li>
</ul>
<p>This adds a layer of motivation for players trying to solve it on their own.</p>
<h2><a href="#future-ideas" aria-hidden="true" class="anchor" id="future-ideas"></a>Future Ideas</h2>
<ul>
<li>Animate the full solution path step by step</li>
<li>Let players <strong>request a hint</strong> only when needed</li>
<li>Track player vs solver efficiency</li>
<li>Add different grid sizes or random move obfuscation</li>
</ul>
<h2><a href="#external-resources" aria-hidden="true" class="anchor" id="external-resources"></a>External Resources</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Breadth-first_search">Breadth-first search</a></li>
<li><a href="https://www.geeksforgeeks.org/breadth-first-search-or-bfs-for-a-graph/">Breadth First Search of BFS for a Graph</a></li>
<li><a href="https://en.wikipedia.org/wiki/Bitwise_operation">Bitwise operation</a></li>
<li><a href="https://sassafras13.github.io/BitManipulation/">Bit Manipulation</a></li>
</ul>
</main><footer><p><p>&copy; 2025 Let's Reinvent the Wheel.</p><small>Exploring programming by (re)creating things, one project at a time.</small></p></footer></body><script></script></html>